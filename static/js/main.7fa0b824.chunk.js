(this["webpackJsonpsd-0x-project-trybewallet"]=this["webpackJsonpsd-0x-project-trybewallet"]||[]).push([[0],{29:function(e,t,n){e.exports=n.p+"static/media/recycle-bin-line.eb81c70a.svg"},30:function(e,t,n){e.exports=n.p+"static/media/document-edit.71d39318.svg"},33:function(e,t,n){e.exports=n(45)},42:function(e,t,n){},44:function(e,t,n){},45:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(19),l=n.n(i),c=n(21),o=n(12),s=(n(42),n(3)),u=n(4),d=n(6),h=n(5),p=n(2),m=n(15),b=n(8),E=n(7),v=function(){return function(e){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(t){var n=Object.keys(t).filter((function(e){return"USDT"!==e}));e({type:"UPDATE_CURRENCY",payload:n})}))}},f=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={email:"",password:"",blockSubmit:!0,redirect:!1},e.validateInputs=e.validateInputs.bind(Object(b.a)(e)),e.handleChange=e.handleChange.bind(Object(b.a)(e)),e.handleClick=e.handleClick.bind(Object(b.a)(e)),e}return Object(u.a)(n,[{key:"validateInputs",value:function(){var e=this.state,t=e.email,n=e.password;/\S+@\S+\.\S+/.test(t)&&n.length>=6?this.setState({blockSubmit:!1}):this.setState({blockSubmit:!0})}},{key:"handleChange",value:function(e){var t=this,n=e.target,a=n.name,r=n.value;this.setState(Object(m.a)({},a,r),(function(){return t.validateInputs()}))}},{key:"handleClick",value:function(){(0,this.props.auth)(this.state.email),this.setState({redirect:!0})}},{key:"render",value:function(){var e=this,t=this.state,n=t.email,a=t.password,i=t.blockSubmit;return t.redirect?r.a.createElement(p.a,{to:"/carteira"}):r.a.createElement("main",null,r.a.createElement("h1",null,"TrybeWallet"),r.a.createElement("form",null,r.a.createElement("img",{src:"https://media.giphy.com/media/67ThRZlYBvibtdF9JH/giphy.gif",alt:"gif pernalonga contando dinheiro"}),r.a.createElement("h3",null,"Login"),r.a.createElement("input",{name:"email",type:"text",placeholder:"EMAIL","data-testid":"email-input",value:n,onChange:this.handleChange}),r.a.createElement("input",{name:"password",type:"password",placeholder:"SENHA","data-testid":"password-input",value:a,onChange:this.handleChange,onKeyUp:function(t){return"Enter"===t.key&&e.handleClick()}}),r.a.createElement("button",{type:"button",disabled:i,onClick:this.handleClick,className:i?"disabled-btn":"login-btn"},"Entrar")))}}]),n}(r.a.Component),g=Object(o.b)(null,(function(e){return{auth:function(t){return e(function(e){return{type:"USER_LOGIN",payload:e}}(t))}}}))(f),j=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.email,n=e.expenses.reduce((function(e,t){var n=t.value,a=t.currency,r=t.exchangeRates;return e+=n*parseFloat(r[a].ask)}),0),a=(Math.round(100*n)/100).toFixed(2);return r.a.createElement("header",null,r.a.createElement("h1",null,"TrybeWallet"),r.a.createElement("div",null,r.a.createElement("span",{"data-testid":"email-field"},"Email:",t),r.a.createElement("span",{"data-testid":"total-field"},"Despesa total: R$",a,r.a.createElement("span",{"data-testid":"header-currency-field"},"BRL"))))}}]),n}(r.a.Component),y=Object(o.b)((function(e){return{email:e.user.email,expenses:e.wallet.expenses}}))(j),O=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,"Descri\xe7\xe3o"),r.a.createElement("th",null,"Tag"),r.a.createElement("th",null,"M\xe9todo de pagamento"),r.a.createElement("th",null,"Valor"),r.a.createElement("th",null,"Moeda"),r.a.createElement("th",null,"C\xe2mbio utilizado"),r.a.createElement("th",null,"Valor convertido"),r.a.createElement("th",null,"Moeda de convers\xe3o"),r.a.createElement("th",null,"Editar/Excluir")))}}]),n}(r.a.Component),C=n(29),k=n.n(C),x=n(30),w=n.n(x),S=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).handleDelete=e.handleDelete.bind(Object(b.a)(e)),e}return Object(u.a)(n,[{key:"handleDelete",value:function(e){var t=this.props,n=t.expenses;(0,t.removeExpense)(n.filter((function(t){return t.id!==e})))}},{key:"render",value:function(){var e=this,t=this.props,n=t.expenses,a=t.onClick,i=t.showButtons;return r.a.createElement("table",null,r.a.createElement(O,null),r.a.createElement("tbody",null,n.map((function(t){var n=t.id,l=t.value,c=t.description,o=t.currency,s=t.method,u=t.tag,d=t.exchangeRates,h=parseFloat(d[o].ask),p=(Math.round(100*h)/100).toFixed(2),m=(Math.round(l*h*100)/100).toFixed(2);return r.a.createElement("tr",{key:n},r.a.createElement("td",null,c),r.a.createElement("td",null,u),r.a.createElement("td",null,s),r.a.createElement("td",null,l),r.a.createElement("td",null,d[o].name.split("/")[0]),r.a.createElement("td",null,p),r.a.createElement("td",null,m),r.a.createElement("td",null,"Real"),r.a.createElement("td",{className:"table-buttons",style:{display:i&&"none"}},r.a.createElement("button",{type:"button","data-testid":"edit-btn",className:"edit-btn",onClick:function(){return a(n)}},r.a.createElement("img",{alt:"delete",src:w.a,width:"16px",height:"16px"})),r.a.createElement("button",{type:"button","data-testid":"delete-btn",className:"delete-btn",onClick:function(){return e.handleDelete(n)}},r.a.createElement("img",{alt:"delete",src:k.a,width:"16px",height:"16px"}))))}))))}}]),n}(r.a.Component),T=Object(o.b)((function(e){return{expenses:e.wallet.expenses}}),(function(e){return{removeExpense:function(t){return e({type:"DELETE_EXPENSE",payload:t})}}}))(S),D=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.type,a=e.name,i=e.value,l=e.onChange,c=e.dataTestId,o=e.min;return r.a.createElement("label",{htmlFor:a},t,r.a.createElement("input",{"data-testid":c,type:n,name:a,id:a,min:o,value:i,onChange:l}))}}]),n}(r.a.Component);D.defaultProps={min:""};var I=D,N=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){var e=this.props,t=e.text,n=e.name,a=e.options,i=e.onChange,l=e.dataTestId,c=e.selected;return r.a.createElement("label",{htmlFor:n},t,r.a.createElement("select",{name:n,id:n,onChange:i,"data-testid":l},a.map((function(e){return r.a.createElement("option",{key:e,value:e,selected:c===e},e)}))))}}]),n}(r.a.Component);N.defaultProps={selected:""};var M=N,R=["Dinheiro","Cart\xe3o de cr\xe9dito","Cart\xe3o de d\xe9bito"],P=["Alimenta\xe7\xe3o","Lazer","Trabalho","Transporte","Sa\xfade"],_=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(s.a)(this,n);var r=(a=t.call(this,e)).props.expenses,i=0;return r.length>0&&(i=r[r.length-1].id+1),a.state={id:i,value:0,description:"",currency:"USD",method:"Dinheiro",tag:"Comida"},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleClick=a.handleClick.bind(Object(b.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getCurrencies)()}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(m.a)({},n,a))}},{key:"handleClick",value:function(){var e=this.state,t=e.value,n=e.description;t&&n&&((0,this.props.saveExpense)(Object(E.a)({},this.state)),this.setState((function(e){return{id:e.id+1,value:0,description:""}})))}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.description,a=this.props.currencyOptions;return r.a.createElement("section",{className:"add-expense"},r.a.createElement(I,{text:"Valor: ",type:"number",name:"value",min:"0",dataTestId:"value-input",value:t,onChange:this.handleChange}),r.a.createElement(I,{text:"Descri\xe7\xe3o: ",type:"text",name:"description",dataTestId:"description-input",value:n,onChange:this.handleChange}),r.a.createElement(M,{text:"Moeda: ",name:"currency",dataTestId:"currency-input",onChange:this.handleChange,options:a}),r.a.createElement(M,{text:"M\xe9todo de pagamento: ",name:"method",dataTestId:"method-input",onChange:this.handleChange,options:R}),r.a.createElement(M,{text:"Tag: ",name:"tag",dataTestId:"tag-input",onChange:this.handleChange,options:P}),r.a.createElement("button",{type:"button",onClick:this.handleClick},"Adicionar despesa"))}}]),n}(r.a.Component),F=Object(o.b)((function(e){return{currencyOptions:e.wallet.currencies,expenses:e.wallet.expenses,loading:e.wallet.loading}}),(function(e){return{saveExpense:function(t){return e((n=t,function(e){return fetch("https://economia.awesomeapi.com.br/json/all").then((function(e){return e.json()})).then((function(t){return e({type:"ADD_EXPENSE",payload:Object(E.a)(Object(E.a)({},n),{},{exchangeRates:t})})}))}));var n},getCurrencies:function(){return e(v())}}}))(_),U=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(e){var a;Object(s.a)(this,n);var r=(a=t.call(this,e)).props,i=r.id,l=r.expenses.find((function(e){return e.id===i})),c=l.value,o=l.description,u=l.currency,d=l.method,h=l.tag;return a.state={id:i,value:c,description:o,currency:u,method:d,tag:h},a.handleChange=a.handleChange.bind(Object(b.a)(a)),a.handleClick=a.handleClick.bind(Object(b.a)(a)),a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.getCurrencies)()}},{key:"handleChange",value:function(e){var t=e.target,n=t.name,a=t.value;this.setState(Object(m.a)({},n,a))}},{key:"handleClick",value:function(){var e=this.props,t=e.edit,n=e.onClick;t(Object(E.a)({},this.state)),n()}},{key:"render",value:function(){var e=this.state,t=e.value,n=e.description,a=e.method,i=e.currency,l=e.tag,c=this.props.currencyOptions;return r.a.createElement("section",{className:"edit-expense"},r.a.createElement(I,{text:"Valor: ",type:"number",name:"value",min:"0",dataTestId:"value-input",value:t,onChange:this.handleChange}),r.a.createElement(I,{text:"Descri\xe7\xe3o: ",type:"text",name:"description",dataTestId:"description-input",value:n,onChange:this.handleChange}),r.a.createElement(M,{text:"Moeda: ",name:"currency",dataTestId:"currency-input",selected:i,onChange:this.handleChange,options:c}),r.a.createElement(M,{text:"M\xe9todo de pagamento: ",name:"method",dataTestId:"method-input",selected:a,onChange:this.handleChange,options:R}),r.a.createElement(M,{text:"Tag: ",name:"tag",dataTestId:"tag-input",selected:l,onChange:this.handleChange,options:P}),r.a.createElement("button",{type:"button",onClick:this.handleClick},"Editar despesa"))}}]),n}(r.a.Component),A=Object(o.b)((function(e){return{expenses:e.wallet.expenses,currencyOptions:e.wallet.currencies,loading:e.wallet.loading}}),(function(e){return{edit:function(t){return e(function(e){return{type:"EDIT_EXPENSE",payload:e}}(t))},getCurrencies:function(){return e(v())}}}))(U),L=function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){var e;return Object(s.a)(this,n),(e=t.call(this)).state={edit:!1,id:""},e.handleEdit=e.handleEdit.bind(Object(b.a)(e)),e.finishEdit=e.finishEdit.bind(Object(b.a)(e)),e}return Object(u.a)(n,[{key:"handleEdit",value:function(e){this.setState({edit:!0,id:e})}},{key:"finishEdit",value:function(){this.setState({edit:!1,id:""})}},{key:"render",value:function(){var e=this.state,t=e.edit,n=e.id;return r.a.createElement(r.a.Fragment,null,r.a.createElement(y,null),!t&&r.a.createElement(F,null),t&&r.a.createElement(A,{id:n,onClick:this.finishEdit}),r.a.createElement(T,{onClick:this.handleEdit,showButtons:t}))}}]),n}(r.a.Component),B=(n(44),function(e){Object(d.a)(n,e);var t=Object(h.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return r.a.createElement(p.d,null,r.a.createElement(p.b,{exact:!0,path:"/",component:g}),r.a.createElement(p.b,{path:"/carteira",component:L}))}}]),n}(r.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var X=n(14),W=n(31),V=n(32),J={email:""},Y=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:J,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"USER_LOGIN":return{email:a};default:return e}},z=n(18),G={currencies:[],expenses:[]},H=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.payload;switch(n){case"UPDATE_CURRENCY":return Object(E.a)(Object(E.a)({},e),{},{currencies:Object(z.a)(a)});case"ADD_EXPENSE":return Object(E.a)(Object(E.a)({},e),{},{expenses:[].concat(Object(z.a)(e.expenses),[a])});case"DELETE_EXPENSE":return Object(E.a)(Object(E.a)({},e),{},{expenses:Object(z.a)(a)});case"EDIT_EXPENSE":var r=e.expenses.map((function(e){return e.id===a.id?Object(E.a)(Object(E.a)({},e),a):e}));return Object(E.a)(Object(E.a)({},e),{},{expenses:Object(z.a)(r)});default:return e}},$=Object(X.combineReducers)({user:Y,wallet:H}),K=Object(X.createStore)($,Object(W.composeWithDevTools)(Object(X.applyMiddleware)(V.a)));l.a.render(r.a.createElement(c.a,{basename:"project-trybewallet"},r.a.createElement(o.a,{store:K},r.a.createElement(B,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[33,1,2]]]);
//# sourceMappingURL=main.7fa0b824.chunk.js.map